<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>VORTEKS — Unicode Card Battler</title>
  <link rel="icon" href="favicon.svg" type="image/svg+xml">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><rect width='32' height='32' fill='%234b2366'/><path d='M8 6 L16 24 L24 6 L20 6 L16 18 L12 6 Z' fill='%2377ffdd'/></svg>" type="image/svg+xml">
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles/main.css">
</head>
<body>
  <!-- Top button header -->
  <header class="button-header">
    <button id="menuToggle" class="menu-toggle" aria-label="Toggle menu" title="Open/close menu">☰</button>
    <button id="helpBtn" class="help-button" aria-label="Help" title="How to play VORTEKS">?</button>
    <div class="button-container">
      <button id="telemetryBtn" aria-label="Telemetry" title="View your gameplay stats and analytics">📊</button>
      <button id="unlocksBtn" aria-label="Unlocks" title="View unlocked cards and achievements">🏆</button>
      <button id="glossaryBtn" aria-label="Glossary" title="View card glossary">📖</button>
      <button id="flavorsBtn" aria-label="Flavors" title="Change color theme">🎨</button>
      <button id="defeatedBtn" aria-label="Defeated Opponents" title="View defeated opponents history">🏴</button>
      <button id="leaderboardBtn" aria-label="Leaderboards" title="View global player rankings">🏅</button>
      <button id="companionBtn" aria-label="VORTEK Companion" title="Check on your VORTEK companion">🌟</button>
      <button id="loreBtn" aria-label="VORTEKS Chronicles" title="Read tales of your journey through the VORTEKS universe">📜</button>
      <button id="debugBtn" aria-label="Debug Menu" title="Open debug panel for testing and development">⛔</button>
      <button id="muteBtn" aria-label="Mute music" title="Mute/unmute music">🔊</button>
      <button id="helpBtnDesktop" class="help-button-desktop" aria-label="Help" title="How to play VORTEKS">?</button>
    </div>
  </header>
  <div class="wrap">
    <h1>VORTEKS</h1>
    <!-- Opponent Panel -->
    <div class="panel" id="oppPanel">
      <div class="opp-box">
        <div>
          <canvas id="oppFace" width="96" height="96" aria-label="Opponent face"></canvas>
          <div id="oppName">NAME</div>
        </div>
        <div>
          <div class="hud">
            <div class="pill">OPP ❤<span id="oppHP"></span></div>
            <div class="pill sh">🛡<span id="oppSH"></span></div>
            <div class="pill en">🔆<span id="oppEN"></span></div>
          </div>
          <div class="status" id="oppStatus"></div>
          <div class="controls">
            <button id="rerollFace" class="btn">REROLL FACE</button>
          </div>
        </div>
      </div>
    </div>
    <!-- Player Panel -->
    <div class="panel" id="youPanel">
      <div class="hud">
        <div class="pill">YOU ❤<span id="youHP"></span></div>
        <div class="pill sh">🛡<span id="youSH"></span></div>
        <div class="pill en">🔆<span id="youEN"></span></div>
        <div class="pill" id="streakPill" title="Win streak">STREAK <span id="streak"></span></div>
        <div class="pill" id="boosterPill" title="Campaign booster level" hidden>BOOSTER <span id="booster"></span></div>
      </div>
      <div class="status" id="youStatus"></div>
      <div class="hand" id="hand"></div>
      <div class="controls">
        <button id="endTurn" class="btn">END TURN</button>
        <button id="restart" class="btn">RESTART</button>
      </div>
    </div>
    <!-- Log Panel -->
    <div class="panel">
      <div class="log" id="log" aria-live="polite"></div>
    </div>
  </div>
  <!-- Start Screen Modal -->
  <div class="modal" id="startModal">
    <div class="start-container">
      <div class="dim-overlay" aria-hidden="true"></div>
      <div class="fog-layer" aria-hidden="true"></div>
      <img id="titleImg" src="vortexicon.png" data-fallback="title.png" alt="VORTEKS" class="title-image" />
      <div id="titleText" class="title-fallback">VORTEKS</div>
      <div id="motto" class="motto"></div>
      <div class="content-overlay">
        <div class="button-group">
          <button id="startBtn" class="btn" title="Choose your cards and quirk">BUILD DECK</button>
          <button id="quickBtn" class="btn" title="Jump straight into battle with a random deck">QUICK START</button>
          <button id="campaignBtn" class="btn" title="Start a new campaign run">CAMPAIGN</button>
          <button id="campaignContinueBtn" class="btn" title="Continue your current campaign run" hidden>CONTINUE CAMPAIGN</button>
        </div>
        <div class="debug-group">
          <button id="selfTest" class="btn debug-btn" title="Run built-in tests">DEBUG</button>
          <button id="resetAllDataBtn" class="btn" style="background:var(--bad); color:white; border-color:var(--bad);" title="Reset all game data including unlocks, progress, companion, and analytics">⚠️ RESET ALL DATA</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Deck Builder Modal -->
  <div class="modal" id="deckModal" hidden>
    <div class="box">
      <div><strong>Build Your Deck</strong> — pick <span id="deckNeed">20</span> cards (max 4 of any one). Choose a mix of card types for unlock achievements!</div>
      <div class="qgrid" id="deckGrid"></div>
      <div style="display:flex;align-items:center;gap:8px;margin-top:8px;justify-content:space-between">
        <div>Selected: <span id="deckCount">0</span>/20</div>
        <div>
          <button id="deckCancel" class="btn">CANCEL</button>
          <button id="deckQuick" class="btn" title="Fill a random valid deck">QUICK PLAY</button>
          <button id="deckClear" class="btn">CLEAR</button>
          <button id="deckConfirm" class="btn" disabled>CONFIRM</button>
        </div>
      </div>
      <!-- Deck Save/Load Section -->
      <div style="margin-top:12px;padding-top:8px;border-top:1px solid var(--border)">
        <div style="margin-bottom:6px;font-size:10px;color:var(--accent)"><strong>Deck Slots:</strong></div>
        <div style="display:flex;gap:4px;margin-bottom:6px">
          <button id="deckSlot1" class="btn deck-slot" style="flex:1;font-size:10px" title="Load deck from slot 1">SLOT 1</button>
          <button id="deckSlot2" class="btn deck-slot" style="flex:1;font-size:10px" title="Load deck from slot 2">SLOT 2</button>
          <button id="deckSlot3" class="btn deck-slot" style="flex:1;font-size:10px" title="Load deck from slot 3">SLOT 3</button>
        </div>
        <div style="display:flex;gap:4px">
          <button id="deckSave1" class="btn deck-save" style="flex:1;font-size:9px" title="Save current deck to slot 1">SAVE→1</button>
          <button id="deckSave2" class="btn deck-save" style="flex:1;font-size:9px" title="Save current deck to slot 2">SAVE→2</button>
          <button id="deckSave3" class="btn deck-save" style="flex:1;font-size:9px" title="Save current deck to slot 3">SAVE→3</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Quirk Picker Modal -->
  <div class="modal" id="quirkModal" hidden>
    <div class="box">
      <div><strong>Pick a Quirk</strong> — one‑line identity for this run.</div>
      <div class="qgrid" id="quirkGrid"></div>
    </div>
  </div>
  <!-- How to Play Modal -->
  <div class="modal" id="helpModal" hidden>
    <div class="box" style="width:min(96vw, 720px); max-height:90vh;">
      <div style="font-size:18px; color:var(--accent); margin:8px 0 16px; text-align:center"><strong>How to Play VORTEKS</strong></div>
      
      <!-- Tab Navigation -->
      <div class="help-tabs" style="display:flex; margin-bottom:16px; border-bottom:2px solid var(--border)">
        <button class="help-tab active" data-tab="basics">Basics</button>
        <button class="help-tab" data-tab="cards">Cards</button>
        <button class="help-tab" data-tab="effects">Effects</button>
        <button class="help-tab" data-tab="quirks">Quirks</button>
        <button class="help-tab" data-tab="symbols">Symbols</button>
      </div>
      
      <!-- Tab Content -->
      <div class="help-content" style="max-height:400px; overflow-y:auto; text-align:left; line-height:1.4;">
        
        <!-- Basics Tab -->
        <div class="help-panel" data-panel="basics">
          <h3 style="color:var(--accent); margin-top:0">Welcome to VORTEKS!</h3>
          <p>A tactical card battler where every decision matters. Your goal is to defeat AI opponents by reducing their health to 0 while keeping yourself alive.</p>
          
          <h4 style="color:var(--accent)">Core Gameplay</h4>
          <div style="margin-left:16px">
            <p><strong>🔆 Energy:</strong> Start with 3 energy each turn. Use it to play cards.</p>
            <p><strong>❤ Health:</strong> Lose the game if it reaches 0. Can heal above maximum (overheal).</p>
            <p><strong>🛡 Shields:</strong> Block incoming damage. No upper limit.</p>
            <p><strong>🃏 Hand:</strong> Draw 1 card each turn. Play cards to attack, defend, or gain advantages.</p>
          </div>
          
          <h4 style="color:var(--accent)">Turn Flow</h4>
          <div style="margin-left:16px">
            <p>1. Draw a card (if deck not empty)</p>
            <p>2. Your turn: play cards, use energy</p>
            <p>3. Opponent's turn: they play their cards</p>
            <p>4. End of turn: status effects trigger, energy resets</p>
          </div>
          
          <h4 style="color:var(--accent)">Building Decks</h4>
          <p>Choose 20 cards for your deck. Maximum 4 copies of any single card. Balance attacks, defenses, and special effects for optimal strategy.</p>
        </div>
        
        <!-- Cards Tab -->
        <div class="help-panel" data-panel="cards" style="display:none">
          <h3 style="color:var(--accent); margin-top:0">Card Types & Examples</h3>
          
          <h4 style="color:var(--accent)">⚔ Attack Cards</h4>
          <div style="margin-left:16px">
            <p><strong>⚔ Strike (1🔆):</strong> Deal 3 damage. Gains +1 damage if you have bonus energy next turn.</p>
            <p><strong>🗡 Pierce (2🔆):</strong> Deal 3 damage. Always does at least 1 damage through shields.</p>
            <p><strong>🔥 Ignite (2🔆):</strong> Burn opponent for 2 damage over 2 turns.</p>
          </div>
          
          <h4 style="color:var(--accent)">🛡 Defense Cards</h4>
          <div style="margin-left:16px">
            <p><strong>🛡 Guard (1🔆):</strong> Gain 3 shields to block incoming damage.</p>
            <p><strong>♥ Heart (1🔆):</strong> Heal 3 health. Can heal above maximum.</p>
          </div>
          
          <h4 style="color:var(--accent)">✨ Skill Cards</h4>
          <div style="margin-left:16px">
            <p><strong>✨ Focus (1🔆):</strong> +2 energy for your next turn only.</p>
            <p><strong>❄ Freeze (2🔆):</strong> Freeze 1 of opponent's energy next turn.</p>
            <p><strong>🔁 Echo (1🔆):</strong> Special effect varies by situation.</p>
          </div>
          
          <h4 style="color:var(--accent)">🔄 Advanced Cards</h4>
          <div style="margin-left:16px">
            <p><strong>⟳ Surge (2🔆):</strong> +1 max energy, +1 energy now.</p>
            <p><strong>🔀 Reconsider (ALL🔆):</strong> Spend all energy to reshuffle your deck and draw cards.</p>
          </div>
        </div>
        
        <!-- Effects Tab -->
        <div class="help-panel" data-panel="effects" style="display:none">
          <h3 style="color:var(--accent); margin-top:0">Status Effects</h3>
          
          <h4 style="color:var(--accent)">🔥 Burn</h4>
          <div style="margin-left:16px">
            <p>Takes damage at the end of each turn. Stacks with itself (amount and duration).</p>
            <p><strong>Example:</strong> Burn 2 for 3 turns = 2 damage per turn for 3 turns</p>
          </div>
          
          <h4 style="color:var(--accent)">❄ Freeze</h4>
          <div style="margin-left:16px">
            <p>Reduces available energy for the affected turns.</p>
            <p><strong>Example:</strong> Freeze 1 energy = opponent has 1 less energy next turn</p>
          </div>
          
          <h4 style="color:var(--accent)">🛡 Shield</h4>
          <div style="margin-left:16px">
            <p>Blocks incoming damage point-for-point. No upper limit.</p>
            <p><strong>Pierce:</strong> Some attacks bypass 1 shield and deal at least 1 damage</p>
          </div>
          
          <h4 style="color:var(--accent)">🔆 Energy Modifiers</h4>
          <div style="margin-left:16px">
            <p><strong>+Energy Next Turn:</strong> Temporary bonus energy for one turn</p>
            <p><strong>Max Energy:</strong> Permanent increase to energy per turn</p>
            <p><strong>Cleanse:</strong> Removes negative status effects</p>
          </div>
          
          <h4 style="color:var(--accent)">💫 Overheal</h4>
          <div style="margin-left:16px">
            <p>Healing above maximum health is allowed up to 150% of max HP.</p>
            <p>Provides a buffer against incoming damage.</p>
          </div>
        </div>
        
        <!-- Quirks Tab -->
        <div class="help-panel" data-panel="quirks" style="display:none">
          <h3 style="color:var(--accent); margin-top:0">Quirks & Progression</h3>
          
          <h4 style="color:var(--accent)">What are Quirks?</h4>
          <p>Special modifiers that define your playstyle for each run. Choose one quirk before each battle to gain unique advantages.</p>
          
          <h4 style="color:var(--accent)">Starting Quirks</h4>
          <div style="margin-left:16px">
            <p><strong>MY FIRST QUIRK:</strong> Start with +1 card in your opening hand</p>
          </div>
          
          <h4 style="color:var(--accent)">Unlockable Quirks</h4>
          <div style="margin-left:16px">
            <p><strong>MINTY:</strong> Start with +1 max energy (and +1 current energy)</p>
            <p style="font-size:0.9em; opacity:0.8">Unlock: Spend 7+ energy in a single turn</p>
            
            <p><strong>SPICY:</strong> Your burn effects deal +1 extra damage</p>
            <p style="font-size:0.9em; opacity:0.8">Unlock: Deal 10+ burn damage in one battle</p>
            
            <p><strong>HEARTY:</strong> Heal +5 HP at the start of each battle</p>
            <p style="font-size:0.9em; opacity:0.8">Unlock: Win with 95%+ of max health remaining</p>
            
            <p><strong>SAINT:</strong> Heal +1 HP at the start of each turn</p>
            <p style="font-size:0.9em; opacity:0.8">Unlock: Heal to 30 HP or more</p>
            
            <p><strong>GUARDIAN:</strong> Gain +1 shield at the start of each turn</p>
            <p style="font-size:0.9em; opacity:0.8">Unlock: Accumulate 10+ shield then win</p>
          </div>
          
          <h4 style="color:var(--accent)">Card Unlocks</h4>
          <p>Defeat different opponent personas to unlock new cards:</p>
          <div style="margin-left:16px">
            <p><strong>Cat/Feline personas:</strong> Unlock Curiosity card</p>
            <p><strong>Robot/Automaton personas:</strong> Unlock Droid Protocol card</p>
          </div>
        </div>
        
        <!-- Symbols Tab -->
        <div class="help-panel" data-panel="symbols" style="display:none">
          <h3 style="color:var(--accent); margin-top:0">Game Symbols & UI</h3>
          
          <h4 style="color:var(--accent)">Interface Elements</h4>
          <div style="margin-left:16px">
            <p><strong>YOU/OPP:</strong> Player and opponent health/shield/energy displays</p>
            <p><strong>STREAK:</strong> Current win streak counter</p>
            <p><strong>END TURN:</strong> Complete your turn and pass to opponent</p>
            <p><strong>RESTART:</strong> Start over with a new opponent</p>
            <p><strong>REROLL FACE:</strong> Generate a new opponent appearance</p>
            <p><strong>📊:</strong> View telemetry and player analytics</p>
            <p><strong>🏆:</strong> View unlocked cards and achievements</p>
            <p><strong>📖:</strong> Open card glossary (shows all card effects)</p>
            <p><strong>🏴:</strong> View defeated opponents history</p>
            <p><strong>🔊:</strong> Mute/unmute background music</p>
            <p><strong>?:</strong> Open this help modal</p>
          </div>
          
          <h4 style="color:var(--accent)">Status Display</h4>
          <div style="margin-left:16px">
            <p><strong>🔥 2 (3):</strong> Burn 2 damage for 3 turns</p>
            <p><strong>❄ 1:</strong> Frozen energy (1 less next turn)</p>
            <p><strong>+2:</strong> Bonus energy next turn</p>
            <p><strong>1/3:</strong> Current turn / Max energy</p>
          </div>
          
          <h4 style="color:var(--accent)">Card Costs</h4>
          <div style="margin-left:16px">
            <p><strong>Numbers (1, 2, 3):</strong> Fixed energy cost</p>
            <p><strong>ALL:</strong> Spend all current energy</p>
            <p><strong>Affordable indicators:</strong> Cards glow when playable</p>
          </div>
          
          <h4 style="color:var(--accent)">Tooltips & Predictions</h4>
          <p>Hover over cards to see detailed effects and predicted outcomes. The game shows you exactly what will happen before you play a card.</p>
          
          <h4 style="color:var(--accent)">Player Analytics (📊)</h4>
          <div style="margin-left:16px">
            <p><strong>Battle Statistics:</strong> Track your wins, losses, streaks, and special victories</p>
            <p><strong>Card Analysis:</strong> See your favorite cards and play patterns by type</p>
            <p><strong>Combat Patterns:</strong> Monitor damage efficiency and energy usage</p>
            <p><strong>Achievement Progress:</strong> View quirk usage and opponent statistics</p>
            <p>All data is saved locally and helps you understand your playstyle!</p>
          </div>
        </div>
        
      </div>
      
      <!-- Footer -->
      <div style="display:flex; justify-content:center; margin-top:16px; padding-top:12px; border-top:1px solid var(--border)">
        <button id="helpCloseBtn" class="btn" style="background:var(--good); color:black; font-weight:bold">Got it!</button>
      </div>
    </div>
  </div>
  <!-- Victory Modal -->
  <div class="modal" id="victoryModal" hidden>
    <div class="box" style="text-align:center; width:min(96vw, 480px)">
      <div style="font-size:20px; color:var(--good); margin:8px 0 16px"><strong>Victory!</strong></div>
      <div style="margin-bottom:16px">You defeated your opponent and your streak continues!</div>
      <div style="display:flex; flex-direction:column; gap:8px;">
        <button id="nextBattleBtn" class="btn" style="background:var(--good); color:black; font-weight:bold">NEXT BATTLE</button>
        <div style="display:flex; gap:8px; justify-content:center">
          <button id="victoryUnlocksBtn" class="btn">UNLOCKS</button>
          <button id="victoryDeckBtn" class="btn">DECK BUILDER</button>
          <button id="victoryRestartBtn" class="btn">RESTART</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Unlocks Modal -->
  <div class="modal" id="unlocksModal" hidden>
    <div class="box" style="width:min(96vw, 600px)">
      <div id="unlocksTitle" style="font-size:18px; color:var(--accent); margin:8px 0 16px; text-align:center"><strong>Unlocks</strong></div>
      <div style="margin-bottom:16px">
        <div style="font-size:14px; color:var(--accent); margin-bottom:8px"><strong>Cards</strong></div>
        <div id="unlocksCardsGrid" class="qgrid" style="max-height:200px; overflow-y:auto;"></div>
      </div>
      <div style="margin-bottom:16px">
        <div style="font-size:14px; color:var(--accent); margin-bottom:8px"><strong>Quirks</strong></div>
        <div id="unlocksQuirksGrid" class="qgrid" style="max-height:200px; overflow-y:auto;"></div>
      </div>
      <div style="display:flex; justify-content:center; margin-top:16px; gap:8px">
        <button id="unlocksCloseBtn" class="btn">CLOSE</button>

      </div>
    </div>
  </div>
  <!-- Glossary Modal -->
  <div class="modal" id="glossaryModal" hidden>
    <div class="box" style="width:min(96vw, 600px)">
      <div style="font-size:18px; color:var(--accent); margin:8px 0 16px; text-align:center"><strong>Card Glossary</strong></div>
      <div id="glossaryGrid" class="qgrid" style="max-height:400px; overflow-y:auto;"></div>
      <div style="display:flex; justify-content:center; margin-top:16px">
        <button id="glossaryCloseBtn" class="btn">CLOSE</button>
      </div>
    </div>
  </div>
  <!-- Flavors Modal -->
  <div class="modal" id="flavorsModal" hidden>
    <div class="box" style="width:min(96vw, 700px)">
      <div style="font-size:18px; color:var(--accent); margin:8px 0 16px; text-align:center"><strong>Color Flavors</strong></div>
      <div id="flavorsGrid" class="flavor-grid" style="max-height:500px; overflow-y:auto; display:grid; grid-template-columns:repeat(auto-fit, minmax(300px, 1fr)); gap:12px;"></div>
      <div style="display:flex; justify-content:center; margin-top:16px">
        <button id="flavorsCloseBtn" class="btn">CLOSE</button>
      </div>
    </div>
  </div>
  <!-- Defeated Opponents Modal -->
  <div class="modal" id="defeatedModal" hidden>
    <div class="box" style="width:min(96vw, 500px)">
      <div style="font-size:18px; color:var(--accent); margin:8px 0 16px; text-align:center"><strong>Defeated Opponents</strong></div>
      <div id="defeatedList" style="max-height:300px; overflow-y:auto; margin-bottom:16px;">
        <div style="text-align:center; color:var(--ink); opacity:0.7; padding:20px;">No opponents defeated yet.</div>
      </div>
      <div style="display:flex; justify-content:center; gap:8px">
        <button id="defeatedCloseBtn" class="btn">CLOSE</button>

      </div>
    </div>
  </div>
  <!-- Telemetry Modal -->
  <div class="modal" id="telemetryModal" hidden>
    <div class="box" style="width:min(96vw, 700px); max-height:80vh; overflow-y:auto">
      <div style="font-size:18px; color:var(--accent); margin:8px 0 16px; text-align:center"><strong>📊 Player Analytics</strong></div>
      
      <!-- Battle Statistics -->
      <div style="margin-bottom:16px">
        <div style="font-size:14px; color:var(--accent); margin-bottom:8px"><strong>Battle Statistics</strong></div>
        <div id="telemetryBattleStats" style="background:rgba(0,0,0,0.3); padding:12px; border-radius:4px; line-height:1.6">
          <div>Loading battle statistics...</div>
        </div>
      </div>
      
      <!-- Favorite Cards -->
      <div style="margin-bottom:16px">
        <div style="font-size:14px; color:var(--accent); margin-bottom:8px"><strong>Card Usage Analysis</strong></div>
        <div id="telemetryCardStats" style="background:rgba(0,0,0,0.3); padding:12px; border-radius:4px; line-height:1.6">
          <div>Loading card usage data...</div>
        </div>
      </div>
      
      <!-- Gameplay Patterns -->
      <div style="margin-bottom:16px">
        <div style="font-size:14px; color:var(--accent); margin-bottom:8px"><strong>Gameplay Patterns</strong></div>
        <div id="telemetryPatterns" style="background:rgba(0,0,0,0.3); padding:12px; border-radius:4px; line-height:1.6">
          <div>Loading gameplay patterns...</div>
        </div>
      </div>
      
      <!-- Achievement Progress -->
      <div style="margin-bottom:16px">
        <div style="font-size:14px; color:var(--accent); margin-bottom:8px"><strong>Achievement Progress</strong></div>
        <div id="telemetryAchievements" style="background:rgba(0,0,0,0.3); padding:12px; border-radius:4px; line-height:1.6">
          <div>Loading achievement data...</div>
        </div>
      </div>
      
      <div style="display:flex; justify-content:center; gap:8px; margin-top:16px">
        <button id="telemetryCloseBtn" class="btn">CLOSE</button>

      </div>
    </div>
  </div>
  <!-- Campaign Reward Modal -->
  <div class="modal" id="campaignRewardModal" hidden>
    <div class="box" style="width:min(96vw, 500px)">
      <div style="font-size:18px; color:var(--accent); margin:8px 0 16px; text-align:center"><strong>🎁 Campaign Rewards</strong></div>
      <div style="margin-bottom:16px;">
        <div style="font-size:14px; color:var(--accent); margin-bottom:8px"><strong>Victory! Choose your rewards:</strong></div>
        <div id="campaignRewardsList" style="max-height:300px; overflow-y:auto; background:rgba(0,0,0,0.3); padding:12px; border-radius:4px;">
          <!-- Reward cards will be populated here -->
        </div>
      </div>
      <div style="display:flex; justify-content:center; gap:8px;">
        <button id="campaignRewardsConfirmBtn" class="btn" style="background:var(--good); color:black; font-weight:bold">CONFIRM REWARDS</button>
        <button id="campaignRewardsEditDeckBtn" class="btn">EDIT DECK</button>
        <button id="campaignRewardsAbandonBtn" class="btn" style="background:var(--bad); color:white">ABANDON RUN</button>
      </div>
    </div>
  </div>
  <!-- Campaign Deck Edit Modal -->
  <div class="modal" id="campaignDeckModal" hidden>
    <div class="box" style="width:min(96vw, 500px)">
      <div style="font-size:18px; color:var(--accent); margin:8px 0 16px; text-align:center"><strong>⚔️ Campaign Deck</strong></div>
      <div style="margin-bottom:16px;">
        <div style="font-size:14px; color:var(--accent); margin-bottom:8px"><strong>Available Cards (<span id="campaignDeckCount">0</span> total in deck):</strong></div>
        <div id="campaignDeckList" style="max-height:300px; overflow-y:auto; background:rgba(0,0,0,0.3); padding:12px; border-radius:4px;">
          <!-- Deck cards will be populated here -->
        </div>
        <div style="font-size:12px; color:var(--ink); opacity:0.7; margin-top:8px;">
          Use +/- to adjust card quantities. Format shows: (in deck)/(total owned). Minimum 10 cards required.
        </div>
      </div>
      <div style="display:flex; justify-content:center; gap:8px;">
        <button id="campaignDeckContinueBtn" class="btn" style="background:var(--good); color:black; font-weight:bold">CONTINUE</button>
        <button id="campaignDeckAbandonBtn" class="btn" style="background:var(--bad); color:white">ABANDON RUN</button>
      </div>
    </div>
  </div>
  <!-- Leaderboards Modal -->
  <div class="modal" id="leaderboardModal" hidden>
    <div class="box" style="width:min(96vw, 800px); max-height:85vh; overflow-y:auto">
      <div style="font-size:18px; color:var(--accent); margin:8px 0 16px; text-align:center">
        <strong>🏅 Global Leaderboards</strong>
      </div>
      
      <!-- Player Profile Section -->
      <div id="leaderboardProfile" style="background:rgba(0,0,0,0.3); padding:12px; border-radius:4px; margin-bottom:16px;">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:8px;">
          <div style="font-size:14px; color:var(--accent);"><strong>Your Profile</strong> <span id="backendStatus" style="font-size:10px;">🔍</span></div>
          <button id="profileSettingsBtn" class="btn" style="font-size:12px; padding:4px 8px;">⚙️ Settings</button>
        </div>
        <div id="profileStatus" style="font-size:12px; color:var(--ink); opacity:0.8;">
          Not sharing stats - Set a nickname to join the leaderboards!
        </div>
      </div>
      
      <!-- Category Tabs -->
      <div class="leaderboard-tabs" style="display:flex; flex-wrap:wrap; gap:4px; margin-bottom:16px; justify-content:center;">
        <button class="leaderboard-tab active" data-category="total_wins">🏆 Wins</button>
        <button class="leaderboard-tab" data-category="win_streak">🔥 Streak</button>
        <button class="leaderboard-tab" data-category="perfect_wins">💎 Perfect</button>
        <button class="leaderboard-tab" data-category="quick_wins">🔆 Quick</button>
        <button class="leaderboard-tab" data-category="win_rate">📈 Rate</button>
        <button class="leaderboard-tab" data-category="total_games">🎮 Active</button>
      </div>
      
      <!-- Leaderboard Content -->
      <div id="leaderboardContent" style="background:rgba(0,0,0,0.3); padding:16px; border-radius:4px; margin-bottom:16px; min-height:300px;">
        <div id="leaderboardTitle" style="font-size:14px; color:var(--accent); margin-bottom:12px; text-align:center;">
          <strong>🏆 Total Wins - Most battles won overall</strong>
          <span id="syncIndicator" style="margin-left:8px; display:none;">🔄</span>
        </div>
        <div id="leaderboardList">
          <!-- Leaderboard entries will be populated here -->
        </div>
      </div>
      
      <!-- Footer -->
      <div style="display:flex; justify-content:center; gap:8px;">
        <button id="leaderboardCloseBtn" class="btn">CLOSE</button>
        <button id="refreshLeaderboardBtn" class="btn">🔄 REFRESH</button>
      </div>
    </div>
  </div>
  <!-- Player Profile Settings Modal -->
  <div class="modal" id="profileModal" hidden>
    <div class="box" style="width:min(96vw, 500px);">
      <div style="font-size:18px; color:var(--accent); margin:8px 0 16px; text-align:center">
        <strong>⚙️ Profile Settings</strong>
      </div>
      
      <div style="margin-bottom:16px;">
        <div style="font-size:14px; color:var(--accent); margin-bottom:8px;"><strong>Nickname</strong></div>
        <input type="text" id="nicknameInput" placeholder="Enter your nickname..." 
               style="width:100%; padding:8px; border:1px solid var(--border); border-radius:4px; background:rgba(0,0,0,0.3); color:var(--ink); font-family:inherit;" 
               maxlength="20">
        <div style="font-size:11px; color:var(--ink); opacity:0.7; margin-top:4px;">
          3-20 characters, will be visible on leaderboards
        </div>
      </div>
      
      <div style="margin-bottom:16px;">
        <label style="display:flex; align-items:center; gap:8px; cursor:pointer;">
          <input type="checkbox" id="shareStatsCheckbox" style="cursor:pointer;">
          <span style="font-size:14px;">Share my stats on global leaderboards</span>
        </label>
        <div style="font-size:11px; color:var(--ink); opacity:0.7; margin-top:4px; margin-left:24px;">
          Only your nickname and game statistics will be shared. You can opt out anytime.
        </div>
      </div>
      
      <div style="background:rgba(0,0,0,0.3); padding:12px; border-radius:4px; margin-bottom:16px;">
        <div style="font-size:12px; color:var(--accent); margin-bottom:8px;"><strong>Privacy Info</strong></div>
        <div style="font-size:11px; color:var(--ink); opacity:0.8; line-height:1.4;">
          • Your stats are stored locally in your browser<br>
          • Only nickname and game statistics are shared<br>
          • No personal information is collected<br>
          • You can delete your leaderboard entry anytime
        </div>
      </div>
      
      <div style="display:flex; justify-content:center; gap:8px;">
        <button id="profileCancelBtn" class="btn">CANCEL</button>
        <button id="profileSaveBtn" class="btn" style="background:var(--good); color:black; font-weight:bold;">SAVE</button>
        <button id="deleteProfileBtn" class="btn" style="background:var(--bad); color:white;">DELETE ENTRY</button>
      </div>
    </div>
  </div>
  <!-- VORTEK Companion Modal -->
  <div class="modal" id="companionModal" hidden>
    <div class="box" style="width:min(96vw, 800px); max-height:90vh; overflow-y:auto;">
      <div style="font-size:18px; color:var(--accent); margin:8px 0 16px; text-align:center">
        <strong>🌟 VORTEK Companion</strong>
        <button id="nameEditBtn" style="float:right; background:none; border:none; color:var(--accent); cursor:pointer; font-size:14px;">✏️</button>
      </div>
      
      <!-- Room Environment -->
      <div id="vortekRoom" style="background:linear-gradient(45deg, #2a2a3a, #3a3a4a); border:2px solid var(--border); border-radius:8px; padding:20px; margin-bottom:20px; position:relative; min-height:200px;">
        <!-- Room Elements -->
        <div id="roomBed" class="room-element" style="position:absolute; bottom:10px; left:10px; font-size:20px;" title="Cozy bed for resting">🛏️</div>
        <div id="roomMirror" class="room-element hidden" style="position:absolute; top:10px; right:10px; font-size:18px;" title="Mirror for self-reflection">🪞</div>
        <div id="roomBookshelf" class="room-element hidden" style="position:absolute; top:10px; left:10px; font-size:18px;" title="Bookshelf for learning">📚</div>
        <div id="roomToybox" class="room-element hidden" style="position:absolute; bottom:10px; right:50px; font-size:18px;" title="Toybox for fun">🧸</div>
        <div id="roomPlant" class="room-element hidden" style="position:absolute; top:50px; right:10px; font-size:16px;" title="Plant for focus">🪴</div>
        <div id="roomArtEasel" class="room-element hidden" style="position:absolute; bottom:50px; left:50px; font-size:16px;" title="Art easel for creativity">🎨</div>
        
        <!-- VORTEK Display (center of room) -->
        <div style="position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); text-align:center;">
          <div id="companionPixelArt" style="margin-bottom:8px; display: flex; justify-content: center; align-items: center;">
            <canvas id="vortekCanvas" width="96" height="96" style="width: 64px; height: 64px; image-rendering: pixelated; filter: drop-shadow(0 0 8px rgba(119, 255, 221, 0.3));"></canvas>
          </div>
          <div id="companionName" style="font-size:16px; color:var(--accent); font-weight:bold; cursor:pointer; text-decoration:underline; text-decoration-style:dotted;" title="Click to rename your VORTEK">VORTEK</div>
          <div id="companionStage" style="font-size:12px; color:var(--ink); opacity:0.8;">Egg</div>
          <div id="companionSound" style="font-size:10px; color:var(--accent); opacity:0.6; margin-top:4px; cursor:pointer;" title="Click to hear VORTEK's unique sound">🔊 Click to hear</div>
        </div>
        
        <!-- Room Activity Display -->
        <div style="position:absolute; bottom:5px; left:50%; transform:translateX(-50%); font-size:10px; color:var(--ink); opacity:0.6;">
          <span id="roomActivity">Exploring the basic room setup...</span>
        </div>
        
        <!-- Room Unlock Hints -->
        <div id="roomUnlockHints" style="position:absolute; bottom:-15px; left:50%; transform:translateX(-50%); font-size:9px; color:var(--accent); opacity:0.7; display:none;">
        </div>
      </div>
      
      <!-- Stats Display -->
      <div style="display:grid; grid-template-columns: 1fr 1fr 1fr; gap:16px; margin-bottom:20px;">
        <!-- Core Stats -->
        <div>
          <div style="font-size:14px; color:var(--accent); margin-bottom:8px;"><strong>Core Stats</strong></div>
          <div class="companion-stat">
            <div>❤️ Happiness: <span id="companionHappiness">50</span>/100</div>
            <div class="stat-bar"><div class="stat-fill" id="happinessBar" style="width:50%; background:var(--good);"></div></div>
          </div>
          <div class="companion-stat">
            <div>🔆 Energy: <span id="companionEnergy">50</span>/100</div>
            <div class="stat-bar"><div class="stat-fill" id="energyBar" style="width:50%; background:var(--accent);"></div></div>
          </div>
          <div class="companion-stat">
            <div>🧠 Wisdom: <span id="companionWisdom">50</span>/100</div>
            <div class="stat-bar"><div class="stat-fill" id="wisdomBar" style="width:50%; background:var(--magic);"></div></div>
          </div>
          <div class="companion-stat">
            <div>💪 Power: <span id="companionPower">50</span>/100</div>
            <div class="stat-bar"><div class="stat-fill" id="powerBar" style="width:50%; background:var(--bad);"></div></div>
          </div>
        </div>
        
        <!-- Personality Stats -->
        <div>
          <div style="font-size:14px; color:var(--accent); margin-bottom:8px;"><strong>Personality</strong></div>
          <div class="companion-stat">
            <div>🔍 Curiosity: <span id="companionCuriosity">40</span>/100</div>
            <div class="stat-bar"><div class="stat-fill" id="curiosityBar" style="width:40%; background:#ff6b6b;"></div></div>
          </div>
          <div class="companion-stat">
            <div>🎨 Creativity: <span id="companionCreativity">35</span>/100</div>
            <div class="stat-bar"><div class="stat-fill" id="creativityBar" style="width:35%; background:#feca57;"></div></div>
          </div>
          <div class="companion-stat">
            <div>💝 Loyalty: <span id="companionLoyalty">60</span>/100</div>
            <div class="stat-bar"><div class="stat-fill" id="loyaltyBar" style="width:60%; background:#ff9ff3;"></div></div>
          </div>
          <div class="companion-stat">
            <div>🎮 Playfulness: <span id="companionPlayfulness">55</span>/100</div>
            <div class="stat-bar"><div class="stat-fill" id="playfulnessBar" style="width:55%; background:#54a0ff;"></div></div>
          </div>
          <div class="companion-stat">
            <div>🎯 Focus: <span id="companionFocus">45</span>/100</div>
            <div class="stat-bar"><div class="stat-fill" id="focusBar" style="width:45%; background:#5f27cd;"></div></div>
          </div>
          <div class="companion-stat">
            <div>⚔️ Courage: <span id="companionCourage">40</span>/100</div>
            <div class="stat-bar"><div class="stat-fill" id="courageBar" style="width:40%; background:#ff3838;"></div></div>
          </div>
        </div>
        
        <!-- Progress & Influence -->
        <div>
          <div style="font-size:14px; color:var(--accent); margin-bottom:8px;"><strong>Progress</strong></div>
          <div class="companion-stat">
            <div>Level: <span id="companionLevel">1</span></div>
          </div>
          <div class="companion-stat">
            <div>Experience: <span id="companionExp">0</span>/<span id="companionExpNeeded">10</span></div>
            <div class="stat-bar"><div class="stat-fill" id="expBar" style="width:0%; background:var(--accent);"></div></div>
          </div>
          <div class="companion-stat" id="evolutionProgress" style="margin-top:8px;">
            <div id="evolutionText">Next Evolution: Level 5 (VORTEK Sprite)</div>
            <div class="stat-bar"><div class="stat-fill" id="evolutionBar" style="width:20%; background:linear-gradient(90deg, #667eea 0%, #764ba2 100%);"></div></div>
          </div>
          <div style="margin-top:12px;">
            <div style="font-size:12px; color:var(--ink); opacity:0.8;" title="Based on battle win rate - affects battle performance bonuses">Battle Influence: <span id="battleInfluence">0</span>%</div>
            <div style="font-size:12px; color:var(--ink); opacity:0.8;" title="Based on variety of cards played - affects experience gain">Card Mastery: <span id="cardMastery">0</span>%</div>
            <div style="font-size:12px; color:var(--ink); opacity:0.8;" title="Based on strategic play depth - affects energy efficiency">Strategic Depth: <span id="strategicDepth">0</span>%</div>
          </div>
        </div>
      </div>
      
      <!-- Status Messages -->
      <div style="background:rgba(0,0,0,0.3); padding:12px; border-radius:4px; margin-bottom:16px; text-align:center;">
        <div id="companionStatus" style="font-size:14px; color:var(--accent); margin-bottom:4px;">Content</div>
        <div id="companionMood" style="font-size:12px; color:var(--ink); opacity:0.8;">Observing your journey...</div>
      </div>
      
      <!-- Action Buttons -->
      <div style="display:flex; gap:8px; justify-content:center; margin-bottom:16px; flex-wrap:wrap;">
        <button id="feedCompanionBtn" class="btn" title="Feed your VORTEK to restore energy">🍎 Feed</button>
        <button id="playCompanionBtn" class="btn" title="Play with your VORTEK to boost happiness">🎾 Play</button>
        <button id="meditateCompanionBtn" class="btn" title="Meditate together to gain wisdom">🧘 Meditate</button>
        <button id="exploreRoomBtn" class="btn" title="Explore the room together">🔍 Explore</button>
      </div>
      
      <!-- Close Button -->
      <div style="display:flex; justify-content:center;">
        <button id="companionCloseBtn" class="btn">CLOSE</button>
      </div>
    </div>
  </div>
  <!-- VORTEKS Chronicles/Lore Modal -->
  <div class="modal" id="loreModal" hidden>
    <div class="box" style="width:min(96vw, 900px); max-height:90vh; overflow-y:auto;">
      <div style="font-size:18px; color:var(--accent); margin:8px 0 16px; text-align:center">
        <strong>📜 VORTEKS Chronicles</strong>
        <div style="font-size:12px; opacity:0.7; margin-top:4px;">Tales of your journey through the infinite dimensions</div>
      </div>
      
      <!-- Chronicle Generation Controls -->
      <div style="display:flex; gap:8px; justify-content:center; margin-bottom:16px; flex-wrap:wrap;">
        <button id="generateLoreBtn" class="btn" style="background:var(--magic); color:white; font-weight:bold;" title="Generate a new tale based on your journey">🌌 Generate New Chronicle</button>
        <button id="refreshLoreBtn" class="btn" title="Refresh the current chronicle">🔄 Refresh Tale</button>
        <button id="favoriteChronicleBtn" class="btn" title="Save this chronicle to favorites" hidden>⭐ Favorite</button>
        <button id="ttsToggleBtn" class="btn" title="Toggle text-to-speech for chronicles">🔊 Read Aloud</button>
      </div>
      
      <!-- TTS Controls (hidden by default) -->
      <div id="ttsControls" style="display:none; gap:8px; justify-content:center; margin-bottom:16px; flex-wrap:wrap;">
        <button id="ttsPlayBtn" class="btn" style="background:var(--good); color:white;" title="Play/Resume reading">▶️ Play</button>
        <button id="ttsPauseBtn" class="btn" style="background:var(--warning); color:white;" title="Pause reading">⏸️ Pause</button>
        <button id="ttsStopBtn" class="btn" style="background:var(--bad); color:white;" title="Stop reading">⏹️ Stop</button>
        <div id="ttsStatus" style="display:flex; align-items:center; color:var(--accent); font-size:12px; padding:0 8px;">
          <span id="ttsStatusText">Ready to read</span>
        </div>
      </div>
      
      <!-- Chronicle Display Area -->
      <div id="chronicleContent" style="background:linear-gradient(135deg, rgba(0,0,0,0.4), rgba(59, 130, 246, 0.1)); padding:20px; border-radius:8px; margin-bottom:16px; min-height:300px; border:1px solid var(--border);">
        <div id="chronicleTitle" style="font-size:16px; color:var(--accent); font-weight:bold; margin-bottom:12px; text-align:center; border-bottom:1px solid var(--border); padding-bottom:8px;">
          Welcome to the VORTEKS Chronicles
        </div>
        <div id="chronicleText" style="font-size:14px; line-height:1.6; color:var(--ink); text-align:justify;">
          <div style="text-align:center; opacity:0.7; padding:40px 20px;">
            <div style="font-size:48px; margin-bottom:16px;">📜</div>
            <div style="font-size:16px; color:var(--accent);">The Cosmic Scrolls Await</div>
            <div style="margin-top:8px;">Click "Generate New Chronicle" to weave a tale of your adventures through the VORTEKS universe, drawing from your battles, your VORTEK companion's growth, and the mysteries you've unlocked.</div>
          </div>
        </div>
      </div>
      
      <!-- Chronicle Insights -->
      <div id="chronicleInsights" style="background:rgba(0,0,0,0.3); padding:12px; border-radius:4px; margin-bottom:16px; display:none;">
        <div style="font-size:12px; color:var(--accent); margin-bottom:6px;"><strong>Chronicle Insights</strong></div>
        <div id="chronicleStats" style="font-size:11px; color:var(--ink); opacity:0.8; line-height:1.4;"></div>
      </div>
      
      <!-- Close Button -->
      <div style="display:flex; justify-content:center;">
        <button id="loreCloseBtn" class="btn">CLOSE</button>
      </div>
    </div>
  </div>

  <!-- Debug Screen (Full Screen) -->
  <div id="debugScreen" class="debug-screen" hidden>
    <div class="debug-container">
      <div class="debug-header">
        <h2>🛠️ VORTEKS Debug Panel</h2>
        <button id="debugCloseBtn" class="debug-btn debug-close">✕</button>
      </div>
      
      <div class="debug-content">
        <!-- Card Testing Section -->
        <div class="debug-section">
          <h3>🃏 Card Testing</h3>
          <div class="debug-grid">
            <button id="debugUnlockAll" class="debug-btn">Unlock All Cards</button>
            <button id="debugLockAll" class="debug-btn">Lock All Cards</button>
            <button id="debugUnlockFerriglobin" class="debug-btn">Unlock Ferriglobin</button>
            <button id="debugUnlockImpervious" class="debug-btn">Unlock Impervious</button>
            <button id="debugShowUnlocks" class="debug-btn">Show Unlock Status</button>
          </div>
          <div class="debug-input-group">
            <label for="debugCardId">Unlock Specific Card:</label>
            <input type="text" id="debugCardId" placeholder="Card ID (e.g., ferriglobin)" class="debug-input">
            <button id="debugUnlockCard" class="debug-btn">Unlock</button>
          </div>
        </div>

        <!-- Campaign Testing Section -->
        <div class="debug-section">
          <h3>🏛️ Campaign Testing</h3>
          <div class="debug-grid">
            <button id="debugStartCampaign" class="debug-btn">Start Campaign</button>
            <button id="debugEndCampaign" class="debug-btn">End Campaign</button>
            <button id="debugShowCampaign" class="debug-btn">Show Campaign Status</button>
          </div>
          <div class="debug-input-group">
            <label for="debugBoosterLevel">Set Booster Level:</label>
            <input type="number" id="debugBoosterLevel" placeholder="0-10" min="0" max="10" class="debug-input">
            <button id="debugSetBooster" class="debug-btn">Set Level</button>
          </div>
        </div>

        <!-- Player State Testing Section -->
        <div class="debug-section">
          <h3>👤 Player State</h3>
          <div class="debug-grid">
            <button id="debugMaxHP" class="debug-btn">Max HP</button>
            <button id="debugMaxShield" class="debug-btn">Max Shield</button>
            <button id="debugMaxEnergy" class="debug-btn">Max Energy</button>
            <button id="debugResetPlayer" class="debug-btn">Reset Player</button>
          </div>
          <div class="debug-input-group">
            <label for="debugSetHP">Set HP:</label>
            <input type="number" id="debugSetHP" placeholder="HP amount" min="1" max="999" class="debug-input">
            <button id="debugApplyHP" class="debug-btn">Apply</button>
          </div>
          <div class="debug-input-group">
            <label for="debugSetShield">Set Shield:</label>
            <input type="number" id="debugSetShield" placeholder="Shield amount" min="0" max="999" class="debug-input">
            <button id="debugApplyShield" class="debug-btn">Apply</button>
          </div>
        </div>

        <!-- Test Running Section -->
        <div class="debug-section">
          <h3>🧪 Testing & Analytics</h3>
          <div class="debug-grid">
            <button id="debugRunTests" class="debug-btn">Run All Tests</button>
            <button id="debugClearTelemetry" class="debug-btn">Clear Telemetry</button>
            <button id="debugShowAnalytics" class="debug-btn">Show Analytics</button>
            <button id="debugResetCompanion" class="debug-btn">Reset Companion</button>
          </div>
        </div>

        <!-- Game Control Section -->
        <div class="debug-section">
          <h3>🎮 Game Control</h3>
          <div class="debug-grid">
            <button id="debugQuickBattle" class="debug-btn">Quick Battle</button>
            <button id="debugEndTurn" class="debug-btn">Force End Turn</button>
            <button id="debugWinBattle" class="debug-btn">Win Battle</button>
            <button id="debugLoseBattle" class="debug-btn">Lose Battle</button>
          </div>
        </div>

        <!-- Quirk Testing Section -->
        <div class="debug-section">
          <h3>✨ Quirk Testing</h3>
          <div class="debug-grid">
            <button id="debugUnlockAllQuirks" class="debug-btn">Unlock All Quirks</button>
            <button id="debugResetQuirks" class="debug-btn">Reset Quirks</button>
            <button id="debugShowQuirks" class="debug-btn">Show Quirk Status</button>
          </div>
        </div>

        <!-- Scrimmage Testing Section -->
        <div class="debug-section">
          <h3>⚔️ AI vs AI Scrimmage</h3>
          <div class="debug-grid">
            <button id="debugRunScrimmage" class="debug-btn">Run Single Scrimmage</button>
            <button id="debugRunBatch" class="debug-btn">Run Batch (10x)</button>
            <button id="debugRunMarathon" class="debug-btn">Run Marathon (100x)</button>
            <button id="debugShowFindings" class="debug-btn">Show Findings</button>
            <button id="debugClearFindings" class="debug-btn">Clear Findings</button>
            <button id="debugExportFindings" class="debug-btn">Export Findings</button>
          </div>
          <div class="debug-input-group">
            <label for="debugPersona1">AI 1 Persona:</label>
            <select id="debugPersona1" class="debug-input">
              <option value="random">Random</option>
              <option value="Bruiser">Bruiser</option>
              <option value="Doctor">Doctor</option>
              <option value="Trickster">Trickster</option>
              <option value="cat">Cat</option>
              <option value="robot">Robot</option>
              <option value="ghost">Ghost</option>
            </select>
            <label for="debugPersona2">AI 2 Persona:</label>
            <select id="debugPersona2" class="debug-input">
              <option value="random">Random</option>
              <option value="Bruiser">Bruiser</option>
              <option value="Doctor">Doctor</option>
              <option value="Trickster">Trickster</option>
              <option value="cat">Cat</option>
              <option value="robot">Robot</option>
              <option value="ghost">Ghost</option>
            </select>
          </div>
          <div class="debug-input-group">
            <label for="debugBoosterLevel1">AI 1 Level:</label>
            <input type="number" id="debugBoosterLevel1" placeholder="0-10" min="0" max="10" value="0" class="debug-input">
            <label for="debugBoosterLevel2">AI 2 Level:</label>
            <input type="number" id="debugBoosterLevel2" placeholder="0-10" min="0" max="10" value="0" class="debug-input">
          </div>
          
          <!-- Dream Expansion Toggle -->
          <div class="debug-input-group">
            <label for="debugDreamCards">
              <input type="checkbox" id="debugDreamCards" class="debug-checkbox"> 
              Enable Dream Expansion Cards
            </label>
            <small style="color: #888; font-size: 11px;">
              Includes Reactive Armor, Pressure, Equilibrium, Sabotage, Adaptation
            </small>
          </div>
        </div>

        <!-- Flavor Testing Section -->
        <div class="debug-section">
          <h3>🎨 Flavor Testing</h3>
          <div class="debug-grid">
            <button id="debugUnlockAllFlavors" class="debug-btn">Unlock All Flavors</button>
            <button id="debugResetFlavors" class="debug-btn">Reset Flavors</button>
            <button id="debugShowFlavors" class="debug-btn">Show Flavor Status</button>
            <div style="display:flex; gap:4px;">
              <input type="text" id="debugFlavorId" placeholder="flavor ID" style="flex:1; padding:4px; font-size:10px;">
              <button id="debugUnlockFlavor" class="debug-btn">Unlock</button>
            </div>
          </div>
        </div>
      </div>

      <div class="debug-output">
        <h3>📊 Debug Output</h3>
        <div id="debugLog" class="debug-log"></div>
        <button id="debugClearLog" class="debug-btn">Clear Log</button>
      </div>
    </div>
  </div>

  <script type="module" src="src/main.js"></script>
</body>
</html>
