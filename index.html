<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>VORTEKS ‚Äî Unicode Card Battler</title>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles/main.css">
</head>
<body>
  <div class="wrap">
    <!-- Top-right buttons: mute and help -->
    <button id="muteBtn" aria-label="Mute music" title="Mute/unmute music">üîä</button>
    <button id="helpBtn" aria-label="Help" title="How to play VORTEKS">?</button>
    <h1>VORTEKS</h1>
    <!-- Opponent Panel -->
    <div class="panel" id="oppPanel">
      <div class="opp-box">
        <div>
          <canvas id="oppFace" width="96" height="96" aria-label="Opponent face"></canvas>
          <div id="oppName">NAME</div>
        </div>
        <div>
          <div class="hud">
            <div class="pill">OPP ‚ù§<span id="oppHP"></span></div>
            <div class="pill sh">üõ°<span id="oppSH"></span></div>
            <div class="pill en">‚ö°<span id="oppEN"></span></div>
          </div>
          <div class="status" id="oppStatus"></div>
          <div class="controls">
            <button id="rerollFace" class="btn">REROLL FACE</button>
          </div>
        </div>
      </div>
    </div>
    <!-- Player Panel -->
    <div class="panel" id="youPanel">
      <div class="hud">
        <div class="pill">YOU ‚ù§<span id="youHP"></span></div>
        <div class="pill sh">üõ°<span id="youSH"></span></div>
        <div class="pill en">‚ö°<span id="youEN"></span></div>
        <div class="pill" id="streakPill" title="Win streak">STREAK <span id="streak"></span></div>
      </div>
      <div class="status" id="youStatus"></div>
      <div class="hand" id="hand"></div>
      <div class="controls">
        <button id="endTurn" class="btn">END TURN</button>
        <button id="restart" class="btn">RESTART</button>
      </div>
    </div>
    <!-- Log Panel -->
    <div class="panel">
      <div class="log" id="log" aria-live="polite"></div>
    </div>
  </div>
  <!-- Start Screen Modal -->
  <div class="modal" id="startModal">
    <div class="box" style="text-align:center; width:min(96vw, 480px)">
      <div style="font-size:24px; color:var(--accent); margin:8px 0 14px">VORTEKS</div>
      <div style="display:flex; gap:8px; justify-content:center">
        <button id="startBtn" class="btn">BUILD DECK</button>
        <button id="quickBtn" class="btn">QUICK START</button>
      </div>
      <div style="margin-top:16px; display:flex; gap:8px; justify-content:center">
        <button id="unlocksBtn" class="btn" style="font-size:12px">UNLOCKS</button>
        <button id="selfTest" class="btn" style="font-size:12px; opacity:0.7" title="Run built-in tests">DEBUG</button>
      </div>
    </div>
  </div>
  <!-- Deck Builder Modal -->
  <div class="modal" id="deckModal" hidden>
    <div class="box">
      <div><strong>Build Your Deck</strong> ‚Äî pick <span id="deckNeed">20</span> cards (max 4 of any one).</div>
      <div class="qgrid" id="deckGrid"></div>
      <div style="display:flex;align-items:center;gap:8px;margin-top:8px;justify-content:space-between">
        <div>Selected: <span id="deckCount">0</span>/20</div>
        <div>
          <button id="deckQuick" class="btn" title="Fill a random valid deck">QUICK PLAY</button>
          <button id="deckClear" class="btn">CLEAR</button>
          <button id="deckConfirm" class="btn" disabled>CONFIRM</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Quirk Picker Modal -->
  <div class="modal" id="quirkModal" hidden>
    <div class="box">
      <div><strong>Pick a Quirk</strong> ‚Äî one‚Äëline identity for this run.</div>
      <div class="qgrid">
        <div class="qcard" data-quirk="minty">MINTY<br/><small>Start with +1 max ‚ö° (and +1 now).</small></div>
        <div class="qcard" data-quirk="spicy">SPICY<br/><small>Your Burns deal +1.</small></div>
        <div class="qcard" data-quirk="piercer">PIERCER<br/><small>Your first attack each turn pierces 1.</small></div>
      </div>
    </div>
  </div>
  <!-- How to Play Modal -->
  <div class="modal" id="helpModal" hidden>
    <div class="box" style="text-align:center; width:min(96vw, 520px)">
      <div style="font-size:18px; color:var(--accent); margin:8px 0 16px"><strong>How to Play</strong></div>
      <div style="text-align:left; line-height:1.4; margin-bottom:16px">
        Welcome to <strong>VORTEKS</strong> ‚Äî a tactical card battler where every decision matters!<br/><br/>
        ‚Ä¢ Play cards using ‚ö° energy to attack, defend, and combo<br/>
        ‚Ä¢ Manage your health ‚ù§, shields üõ°, and energy wisely<br/>
        ‚Ä¢ Defeat AI opponents with unique personas and strategies<br/>
        ‚Ä¢ Build custom decks or jump in with Quick Start<br/>
        ‚Ä¢ Master quirks and status effects for deeper tactics<br/><br/>
        <em>Strategy and timing unlock VORTEKS's true potential...</em>
      </div>
      <button id="helpCloseBtn" class="btn" style="background:var(--good); color:black; font-weight:bold">Got it!</button>
    </div>
  </div>
  <!-- Victory Modal -->
  <div class="modal" id="victoryModal" hidden>
    <div class="box" style="text-align:center; width:min(96vw, 480px)">
      <div style="font-size:20px; color:var(--good); margin:8px 0 16px"><strong>Victory!</strong></div>
      <div style="margin-bottom:16px">You defeated your opponent and your streak continues!</div>
      <div style="display:flex; flex-direction:column; gap:8px;">
        <button id="nextBattleBtn" class="btn" style="background:var(--good); color:black; font-weight:bold">NEXT BATTLE</button>
        <div style="display:flex; gap:8px; justify-content:center">
          <button id="victoryUnlocksBtn" class="btn">UNLOCKS</button>
          <button id="victoryDeckBtn" class="btn">DECK BUILDER</button>
          <button id="victoryRestartBtn" class="btn">RESTART</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Unlocks Modal -->
  <div class="modal" id="unlocksModal" hidden>
    <div class="box" style="width:min(96vw, 600px)">
      <div style="font-size:18px; color:var(--accent); margin:8px 0 16px; text-align:center"><strong>Card Unlocks</strong></div>
      <div id="unlocksGrid" class="qgrid" style="max-height:400px; overflow-y:auto;"></div>
      <div style="display:flex; justify-content:center; margin-top:16px">
        <button id="unlocksCloseBtn" class="btn">CLOSE</button>
      </div>
    </div>
  </div>
  <script type="module" src="src/main.js"></script>
</body>
</html>
